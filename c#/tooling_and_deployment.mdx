# Module 5: Asynchronous Programming and Exception Handling

## Lesson: Tooling and Deployment

Welcome to the Tooling and Deployment lesson of Module 5: Asynchronous Programming and Exception Handling. In this lesson, we will discuss how we can use tools to help us with deployment of our asynchronous applications.

## Tooling

Node.js provides several tools that make working with asynchronous applications easier.

### NPM

NPM (Node Package Manager) is a tool that helps manage dependencies and packages for our Node.js applications. We can use NPM to install packages that provide useful functionality for our applications, such as libraries for working with databases, APIs, or user interfaces.

To use NPM, we need to first initialize a package.json file in our project directory:

```bash
npm init
```

This will create a package.json file where we can declare the dependencies we want to use in our project:

```json
{
  "name": "my-project",
  "version": "1.0.0",
  "description": "A sample Node.js application",
  "main": "index.js",
  "dependencies": {
    "express": "^4.17.1"
  }
}
```

Here, we have declared the Express package as a dependency for our project. We can then install the package using the following command:

```bash
npm install
```

This will install the package and its dependencies in the node_modules directory. We can then use the package in our application by requiring it:

```javascript
const express = require('express');
```

### Nodemon

Nodemon is a tool that automatically restarts our Node.js application when file changes are detected. This means we don't have to manually stop and restart the application every time we make changes to our code.

To use Nodemon, we first need to install it:

```bash
npm install -g nodemon
```

We can then start our application using the following command:

```bash
nodemon index.js
```

Here, we are starting our application with Nodemon. Whenever we make changes to our code, Nodemon will automatically restart the application.

### Winston

Winston is a logger for Node.js applications that makes it easy to log messages to the console or a file. Winston can be configured to log messages to different levels, such as info, warn, and error.

To use Winston, we first need to install it:

```bash
npm install winston
```

We can then configure Winston and use it to log messages in our application:

```javascript
const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

logger.info('This is an info message');
logger.warn('This is a warning message');
logger.error('This is an error message');
```

Here, we are creating a logger object using Winston. We've configured the logger to log messages to two different files, one for error messages and one for all other messages. We can then use the logger object to log different types of messages.

## Deployment

Deploying Node.js applications in production requires a different set of tools and strategies than developing and testing the application locally. Here are some common tools and strategies for deploying Node.js applications:

### Environment Variables

Environment variables can be used to configure our application in different environments. For example, we can have different environment variables for development, staging, and production environments. We can use environment variables to store configuration options, such as database connections strings, API keys, and port numbers.

To use environment variables in our application, we can use the process.env object:

```javascript
const port = process.env.PORT || 3000;
```

Here, we are setting the port number for our application based on the PORT environment variable. If the PORT environment variable is not set, we default to using port 3000.

### Process Managers

Process managers help manage Node.js processes in production environments. They can automatically restart the application if it crashes, monitor performance, and manage application updates.

Some popular process managers for Node.js applications are:

- PM2
- Forever
- StrongLoop

To use a process manager, we first need to install it:

```bash
npm install -g pm2
```

We can then start our application with the process manager:

```bash
pm2 start index.js
```

This will start our application with PM2. We can then use PM2 to monitor the application, restart it if it crashes, and manage application updates.

## Conclusion

In this lesson, we explored some of the tools and strategies that can help us manage and deploy our asynchronous Node.js applications. We explored NPM, Nodemon, and Winston as tools for developing and debugging our applications, and we explored environment variables and process managers as strategies for deploying our applications into production environments.